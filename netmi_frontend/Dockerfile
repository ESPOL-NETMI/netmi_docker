# =============================================================================
#
# NETMI FRONTEND
# 
# =============================================================================
FROM node:14-alpine

LABEL student1="alealcor@espol.edu.ec"
LABEL student2="macaagui@espol.edu.ec"

# -----------------------------------------------------------------------------
# Additional repositories
# -----------------------------------------------------------------------------
RUN apk add --no-cache bash && \
    apk add --no-cache --virtual .build-deps-full \
    curl ethtool tar unzip vim wget gcc

# -----------------------------------------------------------------------------
# Inmediate actions
# -----------------------------------------------------------------------------
WORKDIR /usr/src/app


# -----------------------------------------------------------------------------
# Copy node files and install dependences
# -----------------------------------------------------------------------------

COPY ["package.json", "package-lock.json*", "/usr/src/app/"]

RUN npm install

# -----------------------------------------------------------------------------
# Copy the remaining files taking advantage of the cache
# -----------------------------------------------------------------------------
COPY [".", "/usr/src/app/"]

# -----------------------------------------------------------------------------
# Exposed ports
# -----------------------------------------------------------------------------
EXPOSE 3001

# -----------------------------------------------------------------------------
# Command to run deployed files
# -----------------------------------------------------------------------------
CMD ["npm", "start"]
